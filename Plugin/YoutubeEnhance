#!name = YouTubeMusic
#!desc = 过滤客户端广告增强使用体验
#!icon = https://i.pinimg.com/736x/d6/03/ee/d603eef985ad43e675030bbbb873c249.jpg
#!date = 2026.2.7

[Argument]
blockUpload = switch, true, false, tag = 关闭视频上传
blockShorts = switch, true, false, tag = 关闭短片视频
blockImmersive = switch, true, false, tag = 关闭音乐选段

[Rewrite]
^https:\/\/[\w-]+\.googlevideo\.com\/initplayback.+&oad reject-200

[Script]
http-response ^https:\/\/youtubei\.googleapis\.com\/(youtubei\/v1\/(browse|next|player|search|reel\/reel_watch_sequence|guide|account\/get_setting|get_watch))(\?(.*))?$ script-path=https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/youtube.response.js, requires-body=true, binary-body-mode=true, tag=广告处理, argument=[{blockUpload},{blockShorts},{blockImmersive}]

[MitM]
hostname = youtubei.googleapis.com,*.googlevideo.com
